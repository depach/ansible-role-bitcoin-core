---

machine:
  environment:
    MAKEFLAGS: -j 2

dependencies:
  pre:
    - pip install ansible
    - printf '[defaults]\nroles_path=../' > ansible.cfg

compile:
  override:
    - ansible-playbook tests/test.yml -i tests/inventory --connection=local
    - ansible-playbook tests/test.yml -i tests/inventory --connection=local

test:
  pre:
    - ansible --version
  post:
    - bitcoin-cli -version
    - sudo cat /etc/bitcoin/bitcoind.conf
    - sudo /etc/init.d/bitcoind stop

deployment:
  release:
    tag: /[0-9]+(\.[0-9]+)*/
    owner: lifeofguenter

notify:
  webhooks:
    - url: https://galaxy.ansible.com/api/v1/notifications/
